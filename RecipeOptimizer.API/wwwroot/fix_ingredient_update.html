<!-- 
INSTRUCTIONS:
1. Find line 1107 in index.html which contains: return response.json();
2. Replace it with the code below:
-->

if (response.status === 204) {
    return {}; // No content response
}

// Try to parse JSON, but handle empty responses gracefully
return response.text().then(text => {
    if (!text) return {};
    try {
        return JSON.parse(text);
    } catch (e) {
        console.log('Response was not valid JSON, continuing anyway');
        return {};
    }
});

<!-- 
This fixes the "Unexpected end of JSON input" error by:
1. Handling 204 No Content responses properly
2. Using response.text() instead of response.json() directly
3. Adding error handling for empty or invalid JSON responses
-->
